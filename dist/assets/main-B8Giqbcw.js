(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))m(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&m(f)}).observe(document,{childList:!0,subtree:!0});function u(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(s){if(s.ep)return;s.ep=!0;const o=u(s);fetch(s.href,o)}})();document.addEventListener("DOMContentLoaded",()=>{const l=document.querySelector(".menu-toggle"),d=document.getElementById("main-nav");document.querySelectorAll(".bar"),l&&d&&l.addEventListener("click",()=>{const n=l.getAttribute("aria-expanded")==="true";l.setAttribute("aria-expanded",!n),n?d.classList.remove("open"):d.classList.add("open")}),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",function(c){c.preventDefault();const e=this.getAttribute("href");if(e==="#")return;const r=document.querySelector(e);r&&(window.innerWidth<768&&l.getAttribute("aria-expanded")==="true"&&l.click(),r.scrollIntoView({behavior:"smooth"}))})});const u=document.querySelectorAll(".slide");let m=0;u.length>0&&setInterval(()=>{u[m].classList.remove("active"),m=(m+1)%u.length,u[m].classList.add("active")},5e3);const s=()=>{const n=document.getElementById("loader");n&&setTimeout(()=>{n.classList.add("hidden")},800)};document.readyState==="complete"?s():window.addEventListener("load",s);const o=document.querySelectorAll(".filter-btn"),f=document.querySelectorAll(".schedule-card");o.length>0&&f.length>0&&o.forEach(n=>{n.addEventListener("click",()=>{o.forEach(e=>e.classList.remove("active")),n.classList.add("active");const c=n.textContent.trim();f.forEach(e=>{var r;if(c==="すべて")e.style.display="";else{const t=c.replace("年","");((r=e.querySelector(".year"))==null?void 0:r.textContent.trim())===t?e.style.display="":e.style.display="none"}})})});const p=document.querySelectorAll(".year-btn"),v=document.querySelectorAll(".year-section");if(p.length>0&&v.length>0){const n=e=>{v.forEach(r=>{const t=r.dataset.year,y=parseInt(t,10),i=t==="older"||!isNaN(y)&&y<=2022;e==="all"?i?r.classList.remove("active"):r.classList.add("active"):e==="older"?i?r.classList.add("active"):r.classList.remove("active"):t==e?r.classList.add("active"):r.classList.remove("active")})},c=document.querySelector(".year-btn.active");c&&n(c.dataset.year),p.forEach(e=>{e.addEventListener("click",()=>{p.forEach(t=>t.classList.remove("active")),e.classList.add("active");const r=e.dataset.year;n(r)})})}const a=document.getElementById("contact-form");if(a){const n=a.dataset.apiEndpoint||"https://18vkro0bm3.execute-api.ap-northeast-1.amazonaws.com/prod";a.addEventListener("submit",async c=>{c.preventDefault();const e=a.querySelector('button[type="submit"]'),r=e.textContent;let t=a.querySelector(".form-message");t||(t=document.createElement("div"),t.className="form-message",a.querySelector(".form-actions").insertAdjacentElement("beforebegin",t)),t.style.display="block",t.className="form-message",t.textContent="",e.disabled=!0,e.textContent="送信中...",a.classList.add("submitting");const y={name:document.getElementById("name").value,email:document.getElementById("email").value,tel:document.getElementById("tel").value,subject:document.getElementById("subject").value,message:document.getElementById("message").value};try{if(n==="YOUR_API_GATEWAY_URL_HERE"||n===""){console.warn("API Endpoint not configured. Simulating success."),await new Promise(h=>setTimeout(h,1e3));const E=document.getElementById("subject").options[document.getElementById("subject").selectedIndex].text;throw alert(`【テストモード】
以下の内容で送信しました（実際には送られていません）。

件名: ${E}
お名前: ${y.name}

APIエンドポイントを設定すると実際に送信されます。`),a.reset(),t.style.display="none",new Error("TEST_MODE")}const i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),g=await i.json();i.ok&&g.success?(t.className="form-message success",t.textContent=g.message||"お問い合わせを受け付けました。ありがとうございます。通常1週間に内に返信いたします。1週間以内に返信がない場合、お手数ですが、instagramまたはfacebookのDMよりご連絡ください。",a.reset()):(t.className="form-message error",g.details&&Array.isArray(g.details)?t.textContent=g.details.join(`
`):t.textContent=g.error||"送信に失敗しました。もう一度お試しください。")}catch(i){i.message==="TEST_MODE"||(console.error("Form submission error:",i),t.className="form-message error",t.textContent="通信エラーが発生しました。インターネット接続を確認してください。")}finally{e.disabled=!1,e.textContent=r,a.classList.remove("submitting")}})}});
